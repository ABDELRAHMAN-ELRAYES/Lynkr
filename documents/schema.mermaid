erDiagram
    %% ------------------
    %% Module 1: IAM
    %% ------------------
    USERS {
        uuid id PK
        string first_name
        string last_name
        string username
        string email
        string phone
        string password
        string role
        boolean active
        boolean emailVerified
        timestamp createdAt
        timestamp updatedAt
    }

    ADMIN_PRIVILEGES {
        uuid id PK
        uuid userId FK
        string name
        timestamp createdAt
    }

    %% ------------------
    %% Module 2: Provider Profile
    %% ------------------
    PROVIDER_PROFILES {
        uuid id PK
        uuid userId FK
        uuid serviceId FK
        string title
        string bio
        decimal hourlyRate
        decimal availableBalance
        boolean isApproved
        decimal averageRating
        int totalReviews
        timestamp createdAt
        timestamp updatedAt
    }

    SERVICES {
        uuid id PK
        string name
        string description
        boolean isActive
    }

    SKILLS {
        uuid id PK
        string name
        uuid serviceId FK
        boolean isActive
    }

    PROVIDER_SKILLS {
        uuid id PK
        uuid providerProfileId FK
        string skillName
    }

    PROVIDER_EXPERIENCES {
        uuid id PK
        uuid providerProfileId FK
        string title
        string company
        string location
        string country
        text description
        date startDate
        date endDate
    }

    PROVIDER_EDUCATION {
        uuid id PK
        uuid providerProfileId FK
        string school
        string degree
        string fieldOfStudy
        text description
        date startDate
        date endDate
    }

    PROVIDER_LANGUAGES {
        uuid id PK
        uuid providerProfileId FK
        string language
        string proficiency
    }

    PROVIDER_APPLICATIONS {
        uuid id PK
        uuid userId FK
        uuid providerProfileId FK
        string status
        timestamp cooldownEndsAt
        timestamp createdAt
    }

    APPLICATION_REVIEWS {
        uuid id PK
        uuid applicationId FK
        uuid adminId FK
        string decision
        text reason
        timestamp reviewedAt
    }

    %% ------------------
    %% Module 4: Requests & Proposals
    %% ------------------
    REQUESTS {
        uuid id PK
        uuid clientId FK
        uuid targetProviderId FK
        string title
        text description
        string category
        string budgetType
        decimal fromBudget
        decimal toBudget
        date deadline
        timestamp responseDeadline
        string status
        boolean isPublic
        timestamp createdAt
        timestamp updatedAt
    }

    PROPOSALS {
        uuid id PK
        uuid requestId FK
        uuid providerProfileId FK
        decimal price
        string priceType
        int estimatedDays
        text notes
        string status
        timestamp createdAt
        timestamp updatedAt
    }

    %% ------------------
    %% Module 5: Payments & Escrow
    %% ------------------
    PROJECTS {
        uuid id PK
        uuid clientId FK
        uuid providerProfileId FK
        uuid acceptedProposalId FK
        string status
        decimal totalPrice
        decimal paidAmount
        timestamp startedAt
        timestamp completedAt
        timestamp createdAt
        timestamp updatedAt
    }

    PAYMENTS {
        uuid id PK
        uuid payerId FK
        decimal amount
        string currency
        string paymentType
        string status
        string stripePaymentId
        timestamp paidAt
        timestamp createdAt
    }

    PROJECT_PAYMENTS {
        uuid id PK
        uuid paymentId FK
        uuid projectId FK
    }

    ESCROWS {
        uuid id PK
        uuid projectId FK
        decimal depositAmount
        decimal balance
        string status
        timestamp releasedAt
        timestamp createdAt
    }

    %% ------------------
    %% Module 6: Project Workspace
    %% ------------------
    PROJECT_FILES {
        uuid id PK
        uuid projectId FK
        uuid fileId FK
        uuid uploaderId FK
        string description
        timestamp createdAt
    }

    PROJECT_ACTIVITIES {
        uuid id PK
        uuid projectId FK
        uuid userId FK
        string action
        text details
        timestamp createdAt
    }

    %% ------------------
    %% Module 6B & 7: Communication & Meetings
    %% ------------------
    CONVERSATIONS {
        uuid id PK
        uuid projectId FK
        uuid participant1Id FK
        uuid participant2Id FK
        timestamp createdAt
    }

    MESSAGES {
        uuid id PK
        uuid conversationId FK
        uuid senderId FK
        text content
        boolean isRead
        timestamp createdAt
    }

    MEETINGS {
        uuid id PK
        uuid projectId FK
        uuid hostId FK
        uuid guestId FK
        string channelName
        string status
        timestamp scheduledAt
        timestamp startedAt
        timestamp endedAt
        timestamp createdAt
    }

    %% ------------------
    %% Module 7: Teaching Scheduling
    %% ------------------
    TEACHING_SLOTS {
        uuid id PK
        uuid providerProfileId FK
        date slotDate
        string startTime
        string endTime
        int durationMinutes
        string sessionType
        int maxParticipants
        timestamp createdAt
    }

    TEACHING_SESSIONS {
        uuid id PK
        uuid slotId FK
        uuid instructorId FK
        string status
        string channelName
        timestamp startedAt
        timestamp completedAt
        timestamp createdAt
    }

    SESSION_PARTICIPANTS {
        uuid id PK
        uuid sessionId FK
        uuid userId FK
        string status
        timestamp bookedAt
    }

    SESSION_PAYMENTS {
        uuid id PK
        uuid paymentId FK
        uuid participantId FK
    }

    SESSION_ATTENDANCES {
        uuid id PK
        uuid sessionId FK
        uuid userId FK
        timestamp joinedAt
        timestamp leftAt
    }

    SESSION_FILES {
        uuid id PK
        uuid sessionId FK
        uuid fileId FK
        uuid uploaderId FK
    }

    SESSION_CONVERSATIONS {
        uuid id PK
        uuid sessionId FK
        timestamp createdAt
    }

    SESSION_MESSAGES {
        uuid id PK
        uuid conversationId FK
        uuid senderId FK
        text content
        timestamp createdAt
    }

    %% ------------------
    %% Module 8: Reviews
    %% ------------------
    REVIEWS {
        uuid id PK
        uuid reviewerId FK
        uuid targetUserId FK
        int rating
        text comment
        string reviewType
        string status
        timestamp createdAt
    }

    PROJECT_REVIEWS {
        uuid id PK
        uuid reviewId FK
        uuid projectId FK
    }

    SESSION_REVIEWS {
        uuid id PK
        uuid reviewId FK
        uuid sessionId FK
    }

    %% ------------------
    %% Module 9: Notifications
    %% ------------------
    NOTIFICATIONS {
        uuid id PK
        uuid userId FK
        string title
        text message
        string type
        string category
        string entityId
        string entityType
        boolean isRead
        timestamp createdAt
    }

    %% ------------------
    %% Module 10: Reporting
    %% ------------------
    REPORTS {
        uuid id PK
        uuid reporterId FK
        uuid targetUserId FK
        string targetType
        string targetId
        string category
        text description
        string status
        timestamp createdAt
    }

    REPORT_FILES {
        uuid id PK
        uuid reportId FK
        uuid fileId FK
    }

    REPORT_ACTIONS {
        uuid id PK
        uuid reportId FK
        uuid adminId FK
        string actionType
        text details
        timestamp createdAt
    }

    %% ------------------
    %% Module 11: Subscriptions
    %% ------------------
    SUBSCRIPTION_PLANS {
        uuid id PK
        string name
        decimal price
        int durationDays
        int visibilityBoost
        boolean isActive
    }

    PROVIDER_SUBSCRIPTIONS {
        uuid id PK
        uuid providerProfileId FK
        uuid planId FK
        string status
        string paymentStatus
        date startDate
        date endDate
        timestamp createdAt
    }

    %% ------------------
    %% Module 12: File Management
    %% ------------------
    FILES {
        uuid id PK
        string filename
        string path
        string mimetype
        int size
        timestamp createdAt
    }

    REQUEST_FILES {
        uuid id PK
        uuid requestId FK
        uuid fileId FK
    }

    PROPOSAL_FILES {
        uuid id PK
        uuid proposalId FK
        uuid fileId FK
    }

    %% ------------------
    %% Relationships
    %% ------------------

    %% IAM
    USERS ||--o{ ADMIN_PRIVILEGES : has

    %% Provider
    USERS ||--o| PROVIDER_PROFILES : has
    PROVIDER_PROFILES ||--o| SERVICES : specializes_in
    SERVICES ||--o{ SKILLS : contains
    PROVIDER_PROFILES ||--o{ PROVIDER_SKILLS : has
    PROVIDER_PROFILES ||--o{ PROVIDER_EXPERIENCES : has
    PROVIDER_PROFILES ||--o{ PROVIDER_EDUCATION : has
    PROVIDER_PROFILES ||--o{ PROVIDER_LANGUAGES : has
    USERS ||--o{ PROVIDER_APPLICATIONS : submits
    PROVIDER_APPLICATIONS ||--o| APPLICATION_REVIEWS : reviewed_by

    %% Request & Proposal
    USERS ||--o{ REQUESTS : client_creates
    PROVIDER_PROFILES ||--o{ REQUESTS : targeted
    REQUESTS ||--o{ PROPOSALS : receives
    PROVIDER_PROFILES ||--o{ PROPOSALS : submits
    REQUESTS ||--o{ REQUEST_FILES : attachments
    PROPOSALS ||--o{ PROPOSAL_FILES : attachments
    FILES ||--o{ REQUEST_FILES : file
    FILES ||--o{ PROPOSAL_FILES : file

    %% Project & Escrow
    USERS ||--o{ PROJECTS : client
    PROVIDER_PROFILES ||--o{ PROJECTS : provider
    PROPOSALS ||--o| PROJECTS : accepted
    PROJECTS ||--o| ESCROWS : holds_funds
    PROJECTS ||--o{ PROJECT_PAYMENTS : payments
    PAYMENTS ||--o| PROJECT_PAYMENTS : link
    USERS ||--o{ PAYMENTS : pays
    PROJECTS ||--o{ PROJECT_FILES : documents
    PROJECTS ||--o{ PROJECT_ACTIVITIES : history
    FILES ||--o{ PROJECT_FILES : file

    %% Comms & Meetings
    PROJECTS ||--o| CONVERSATIONS : chat
    CONVERSATIONS ||--o{ MESSAGES : has
    USERS ||--o{ MESSAGES : sends
    PROJECTS ||--o{ MEETINGS : video_calls
    
    %% Teaching
    PROVIDER_PROFILES ||--o{ TEACHING_SLOTS : availability
    TEACHING_SLOTS ||--o| TEACHING_SESSIONS : booked_as
    TEACHING_SESSIONS ||--o{ SESSION_PARTICIPANTS : attendees
    USERS ||--o{ SESSION_PARTICIPANTS : student
    SESSION_PARTICIPANTS ||--o| SESSION_PAYMENTS : payment_link
    PAYMENTS ||--o| SESSION_PAYMENTS : payment
    TEACHING_SESSIONS ||--o{ SESSION_ATTENDANCES : logs
    TEACHING_SESSIONS ||--o{ SESSION_FILES : resources
    TEACHING_SESSIONS ||--o| SESSION_CONVERSATIONS : chat
    
    %% Notifications
    USERS ||--o{ NOTIFICATIONS : receives

    %% Reviews
    USERS ||--o{ REVIEWS : gives
    USERS ||--o{ REVIEWS : receives
    REVIEWS ||--o| PROJECT_REVIEWS : context
    PROJECTS ||--o| PROJECT_REVIEWS : reviewed
    REVIEWS ||--o| SESSION_REVIEWS : context
    TEACHING_SESSIONS ||--o| SESSION_REVIEWS : reviewed

    %% Reporting
    USERS ||--o{ REPORTS : submits
    USERS ||--o{ REPORTS : target_user
    REPORTS ||--o{ REPORT_FILES : evidence
    REPORTS ||--o{ REPORT_ACTIONS : actions

    %% Subscriptions
    PROVIDER_PROFILES ||--o{ PROVIDER_SUBSCRIPTIONS : subscribes
    SUBSCRIPTION_PLANS ||--o{ PROVIDER_SUBSCRIPTIONS : plan
